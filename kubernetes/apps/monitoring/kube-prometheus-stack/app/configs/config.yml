---
global:
  resolve_timeout: 5m

receivers:
  - name: heartbeat
    webhook_configs:
      - url: "https://heartbeat.uptimerobot.com/{{ .UPTIMEROBOT_HEARTBEAT_TOKEN }}"
        send_resolved: true

  - name: "null" # quote

  - name: pushover
    pushover_configs:
      - url_title: View in Alertmanager
        token: "{{ .PUSHOVER_TOKEN }}"
        user_key: "{{ .PUSHOVER_USER_KEY }}"
        send_resolved: true
        html: true
        sound: gamelan

route:
  group_by: ["alertname", "job"]
  group_wait: 1m
  group_interval: 10m
  repeat_interval: 12h
  receiver: pushover
  routes:
    - receiver: heartbeat
      group_wait: 0s
      group_interval: 2m
      repeat_interval: 2m
      matchers:
        - alertname =~ "Watchdog"

    - receiver: "null" # quote
      matchers:
        - alertname =~ "InfoInhibitor"

    - receiver: pushover
      matchers:
        - severity = "critical"
      continue: true
inhibit_rules:
  - source_matchers:
      - severity = "critical"
    target_matchers:
      - severity = "warning"
    equal: ["alertname", "namespace"]
